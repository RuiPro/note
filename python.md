# 前言

> 此教程为python笔记。
>
> 对于一个写惯了C/C++的程序员来说，初学python简直就是噩梦。python的许多设计和C/C++是完全相反的。比如，C++讲究对象的内存和生命周期，给函数传参时，可以选择值传递、引用传递和地址(指针)传递，而python的设计是全部都优先使用值传递，某些确实不能值传递的才传递引用，你想改变某个变量的值？对不起，你需要再定义一个(虽然内部封装了，让你看起来可以直接赋值)。再比如，C++的类，或者说结构体，可以一眼就能看出来成员的差异，静态成员、普通成员。而python则是另一种写法，在类里直接定义的是静态成员，在`__init__`里定义的才算普通成员。而python的成员函数也有三种，类方法、成员方法和静态方法，其中它们的实现和调用又是非常紊乱的，某些需要@修饰语，某些需要定义一个额外的第一个参数，调用起来也是乱七八糟，你可以通过类调用，也可以通过函数调用，虽然python**提倡**某些方法的调用规范，但这种设计让我觉得python在设计面向对象方面是一门失败的语言。
>
> 为什么要学？不是因为python有多优秀，而是其他人都在用python，仅此而已。工作要用到之前，我尝试过学习python，但我无法习惯python的写法，那时我认为学python是各自精彩的事情。但直到我发现工作需要使用python，这下我不得不去啃python这个骨头了。
>
> 2024.01.07 SUN 20:05

本教程为python3教程，python2已经过时且不再维护。对于python这门新兴的语言来说，及时摒弃旧版本是应该的，任何理直气壮地使用旧版本的人都是慵懒的人。



# 正文

python是一门脚本语言，依靠解释器执行脚本。其官网是www.python.org，你可以在此下载针对各操作系统的解释器。

在安装完成python解释器后，你可以添加解释器为环境变量以方便使用。正确搭建环境后，在终端中输入`python -v`你应该可以看到输出。

python解释器有以下命令行参数：

- -d：在解析时显示调试信息
- -O：生成优化代码 ( .pyo 文件 )
- -S：启动时不引入查找Python路径的位置
- -v：输出解释器版本
- -c cmd：执行 Python 脚本，并将运行结果作为 cmd 字符串。
- file：最后跟着的参数，表示你需要执行哪个python脚本文件

python的执行是按脚本的语句执行的。你可以直接在终端中逐行输入语句执行，也可以将python语句写在一个文件里用解释器执行，通常这个文件的后缀为.py。除此之外，vscode、pycharm等编辑器也对python有良好的支持。

我们很少使用直接在终端中写python语句的方式。因此，在下文中的脚本执行方式均为文件。



## python文件编码

python脚本文件存在编码。如果不指定，将使用默认的ASCII编码。

你可以在python文件的开始指定文件编码，有两种方式：

1. ```
   # -*- coding: utf-8 -*-
   ```

2. ```
   # coding=utf-8
   ```

注意，第二种方式的`=`号左右不允许出现空格。



## 注释

python使用`#`号注释一行，也可以使用`"""`注释多行，比如

```
# 一行注释
"""
多行
注释
"""
```



## 语句

python脚本由语句构成，语句可以是变量的定义、操作符操作、函数或类的定义、函数调用等等。python是大小写敏感的。

没有任何标识可以代表语句结束，相反，python中语句通常都为一行。

如果你觉得某个语句太长了，你可以使用`\`号分隔，把一个语句拆分成多行。



## 语句块

python语句块由多个同级语句构成。和C/C++使用`{}`来区分语句级别不同，在python中，语句是以缩进来表示级别的，连续同一缩进的语句被视为同一级别的语句。



## 变量

一个变量具有三个属性：类型、名称和值。但python不需要你提供变量类型，只需要你提供名称和值即可。

python定义一个变量的方式为`变量名=值`，比如下面这个语句定义了一个整形变量a，它的值为123

```
a = 123
```

也可以同时赋值多个变量，比如这么这个语句定义了三个整形变量a、b和c，它们的值都是123

```
a = b = c = 123
```

更多的，python允许你使用一个`=`号按列表赋值多个变量，列表元素需要使用`,`号分隔且需要一一对应，比如这么这个语句定义了三个整形变量a、b和c，a的值为1，b的值为2，c的值为3

```
a, b, c = 1, 2, 3
```



### python类型

python虽然无需你指定变量类型，但变量仍有类型，只是解释器帮你识别了。python拥有以下内置类型：

> python对于变量的设计称为“为值起名”更恰当。

- 数字，分为4字节有符号整形int、4字节有符号浮点型float、bool值、复数
- 字符串
- bool值，只有True和False，True为1，False为0。在python3之后，bool值为数字的子类型
- 列表，能存放任意内容的无序序列
- 元组，能存放任意内容的无序序列，但不允许修改
- 集合，一个无序的不重复的元素序列，和C++的unordered_set一样
- 字典，键值对，和C++的map一样



### python类型的可变性

python和C/C++最大的区别就在于，python的变量存在可变性。

- 这些变量是可变的：列表、字典、集合
- 这些变量是不可变的：数字、字符串、元组、自定义类

可变是指某个变量可以直接在原地址上修改，不可变是指变量在修改时，必须新建一个新的、修改后的变量，再赋值到原变量上。

python中，每个变量都可以使用`id()`函数取id，这个id返回的是变量的内存地址。

最直接的判断方式就是给一个变量赋值，如果变量的地址和原来的相同，那么就是可变的，如果不同，就是不可变的。

> 在C/C++中，每个变量都有其内存空间，在生命周期内，这个变量的内存地址不变，所以C/C++中的变量是可变的。可变有什么缺陷吗？

这段代码表示了python中可变性的一些特性。

```
a = b = 123
print(id(a))
print(id(b))

a = 456
print(id(a))

a = 123
print(id(a))
```

输出结果为

```
140729965933160
140729965933160
1527822924688
140729965933160
```

可以看到，对于不可变的类型，值相同的变量的id是一样的。

> 我猜想python可能是想提高内存的利用率