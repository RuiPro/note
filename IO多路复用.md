## 楔子

IO操作，就是Input/Output，是应用层通过操作系统访问硬件IO设备的一种统称。在所有的操作系统里，IO操作的目标都被映射为一块内存，IO操作其实就是对这块内存进行读写。首先，应用向操作系统发起请求，然后操作系统将硬件设备的数据拷贝到内存里，然后应用就可以通过访问内存来传输数据了。

我们熟悉的IO有很多，比如C++的标准输入输出流对象`cin`和`cout`，文件流，网络传输流...在这里面，网络传输流可能是你要阻塞最久的了，因为你无法确定网络的对端什么时候给你传输数据，而你只能傻等...

你可能会用到多线程来在傻等的同时做其他事情，但你总要在意对方什么时候会给你发数据。如果有100个对端同时和你通信，那么你就要同时等100个对端的消息，你可能会开100个线程...这样固然可以，但，有没有更好的办法？

操作系统的设计者想到了这一种情况。因为IO操作需要操作系统去从外设拷贝数据，操作系统很清楚地知道什么时候你可以对这块内存进行读写。于是，设计者们提供了一个接口来帮助应用设计者去更高效地使用IO。



## IO多路复用

IO多路复用是操作系统为我们提供的一个实现异步IO的方式。异步指的是你不需要阻塞等待IO就绪，你需要做的是问一下操作系统有没有就绪的IO可以读写即可。至于你什么时候问，多久问一次，问了之后干什么都是自由的，这总比你傻傻地等着IO就绪好得多。

IO多路复用需要你把文件描述符或底层句柄提供给操作系统，让操作系统去帮你检测这些IO是否就绪。

